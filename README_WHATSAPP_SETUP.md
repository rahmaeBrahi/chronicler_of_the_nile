# ุฏููู ุฅุนุฏุงุฏ ุงููุงุชุณุงุจ ููุทุงูุจุฉ ๐ฑ

## ูุฑุญุจุงู! ๐

ูุฐุง ุงูุฏููู ุณูุณุงุนุฏู ูู ุชุดุบูู ูุดุฑูุน Chronicler of the Nile ูุน ุฅููุงููุฉ ุงููุงุชุณุงุจ ุจุฏูู ุงูุญุงุฌุฉ ูุฏูููู.

## ูุง ุชู ุชุนุฏููู ูู ุงูููุฏ ๐ง

1.  **ุชู ุชุนุฏูู ููู `whatsapp.py`**:
    *   ุชู ุฅุถุงูุฉ ููู ุงูุชุฑุงุถูุฉ ูููุชุบูุฑุงุช ุงููุทููุจุฉ (`WHATSAPP_ACCESS_TOKEN`, `WHATSAPP_PHONE_NUMBER_ID`, `WHATSAPP_VERIFY_TOKEN`, `WHATSAPP_APP_SECRET`).
    *   ุชู ุชุนุทูู ุงูุชุญูู ูู ุงูุชูููุน (`verify_webhook_signature`) ููุงุฎุชุจุงุฑ ุงููุญูู.
    *   ุชู ุชุจุณูุท ุนูููุฉ ุงูุชุญูู ูู webhook (`verify_webhook`) ูุชูุจู ุฃู ุทูุจ `subscribe`.
    ูุฐู ุงูุชุนุฏููุงุช ุชุณูุญ ูู ุจุชุดุบูู ุงููุดุฑูุน ูุงุฎุชุจุงุฑู ูุญูููุง ุฏูู ุงูุญุงุฌุฉ ูุฏูููู ุฃู ููุงุชูุญ ุญููููุฉ ูู ุงูุจุฏุงูุฉ.

## ุงูุฎุทูุงุช ุงููุทููุจุฉ ููู ๐

### 1. ุฅุนุฏุงุฏ ุงูุจูุฆุฉ ุงููุญููุฉ ูุชุดุบูู ุงููุดุฑูุน

1.  **ุงุณุชุฎุฑุฌู ุงูููู ุงููุถุบูุท** ุงูุฐู ุฃุฑุณูุชู ููู.
2.  **ุงูุชุญู Terminal ุฃู Command Prompt** ูุงูุชููู ุฅูู ูุฌูุฏ ุงููุดุฑูุน:
    ```bash
    cd chronicler_of_the_nile/backend
    ```
3.  **ุฃูุดุฆู ููู `.env`** ูู ุงูููู ุงููุซุงู:
    ```bash
    cp .env.example .env
    ```
    (ุนูู Windowsุ ูุฏ ุชุญุชุงุฌูู ุฅูู ุงุณุชุฎุฏุงู `copy .env.example .env`)
4.  **ูููู ุจุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ** (ุฅุฐุง ูู ุชูููู ูุฏ ูุนูุชูุง):
    ```bash
    source venv/bin/activate  # ุนูู Linux/Mac
    # ุฃู
    venv\Scripts\activate     # ุนูู Windows
    ```
5.  **ุชุฃูุฏู ูู ุชุซุจูุช ุฌููุน ุงูููุชุจุงุช ุงููุทููุจุฉ**:
    ```bash
    pip install -r requirements.txt
    ```
6.  **ุดุบูู ุงููุดุฑูุน**:
    ```bash
    python src/main.py
    ```
    ุณูุชู ุชุดุบูู ุงูุฎุงุฏู ุนูู `http://localhost:5000`.

### 2. ุงูุญุตูู ุนูู ููุงุชูุญ WhatsApp Business API (ููุชูุงูู ุงููุนูู)

ูุฅุฑุณุงู ูุงุณุชูุจุงู ุฑุณุงุฆู ูุงุชุณุงุจ ุญููููุฉุ ุณุชุญุชุงุฌูู ุฅูู ุงูุญุตูู ุนูู ุงูููุงุชูุญ ุงูุชุงููุฉ ูู ุญุณุงุจู ุนูู Facebook Developer:

1.  **ุฅูุดุงุก ุญุณุงุจ Facebook Developer**: ุฅุฐุง ูู ููู ูุฏูู ุญุณุงุจุ ุงุฐูุจู ุฅูู [https://developers.facebook.com](https://developers.facebook.com) ูุณุฌูู ุงูุฏุฎูู ุฃู ุฃูุดุฆู ุญุณุงุจูุง ุฌุฏูุฏูุง.
2.  **ุฅูุดุงุก ุชุทุจูู ุฌุฏูุฏ**: 
    *   ุจุนุฏ ุชุณุฌูู ุงูุฏุฎููุ ุงููุฑู ุนูู `My Apps` ุซู `Create App`.
    *   ุงุฎุชุงุฑู ููุน ุงูุชุทุจูู `Business`.
    *   ุงุชุจุนู ุงูุฎุทูุงุช ูุฅููุงู ุฅูุดุงุก ุงูุชุทุจูู.
3.  **ุฅุถุงูุฉ ููุชุฌ WhatsApp**: 
    *   ูู ููุญุฉ ุชุญูู ุงูุชุทุจููุ ุงุฐูุจู ุฅูู `Products` ุซู ุงููุฑู ุนูู `Set up` ุจุฌุงูุจ `WhatsApp`.
    *   ุงุชุจุนู ุงูุชุนูููุงุช ูุฅุนุฏุงุฏ WhatsApp Business Account ูุฑุจุท ุฑูู ูุงุชู (ููููู ุงุณุชุฎุฏุงู ุฑูู ูุงุชู ุชุฌุฑูุจู ูู ุงูุจุฏุงูุฉ).
4.  **ุงูุญุตูู ุนูู ุงูููุงุชูุญ**: 
    *   **`WHATSAPP_ACCESS_TOKEN`**: ุณุชุฌุฏููู ูู ุตูุญุฉ `WhatsApp` > `API Setup` ุถูู ููุญุฉ ุชุญูู ุงูุชุทุจูู. ูุฐุง ุงูุฑูุฒ ุงููููุฒ ูุคูุชุ ูููุญุตูู ุนูู ุฑูุฒ ุฏุงุฆู ุณุชุญุชุงุฌูู ุฅูู ุฅุนุฏุงุฏุงุช ูุชูุฏูุฉ (ููู ุงูุฑูุฒ ุงููุคูุช ูููู ููุงุฎุชุจุงุฑ).
    *   **`WHATSAPP_PHONE_NUMBER_ID`**: ุณุชุฌุฏููู ุฃูุถูุง ูู ุตูุญุฉ `WhatsApp` > `API Setup`.
    *   **`WHATSAPP_APP_SECRET`**: ุงุฐูุจู ุฅูู `App Settings` > `Basic` ูู ููุญุฉ ุชุญูู ุงูุชุทุจูู.
    *   **`WHATSAPP_VERIFY_TOKEN`**: ูุฐุง ุงูุฑูุฒ ุชููููู ุจุชุญุฏูุฏู ุจููุณู. ุงุฎุชุงุฑู ุฃู ูุต ุณุฑู (ูุซุงู: `my_secret_token_123`). ุณุชุญุชุงุฌูู ุฅููู ุนูุฏ ุฅุนุฏุงุฏ ุงูู webhook.

5.  **ุชุญุฏูุซ ููู `.env`** ุจุงูููู ุงูุญููููุฉ ุงูุชู ุญุตูุชู ุนูููุง:
    ```ini
    WHATSAPP_ACCESS_TOKEN=YOUR_ACTUAL_ACCESS_TOKEN
    WHATSAPP_PHONE_NUMBER_ID=YOUR_ACTUAL_PHONE_NUMBER_ID
    WHATSAPP_VERIFY_TOKEN=my_secret_token_123
    WHATSAPP_APP_SECRET=YOUR_ACTUAL_APP_SECRET
    ```

### 3. ุงุณุชุฎุฏุงู ngrok ูุฑุจุท ูุดุฑูุนู ุจุงูุฅูุชุฑูุช (ุจุฏูู ุฏูููู)

ุจูุง ุฃููู ูุง ุชููููู ุฏููููุ ููููู ุงุณุชุฎุฏุงู `ngrok` ูุฅูุดุงุก ููู ุขูู ูู ุงูุฅูุชุฑูุช ุฅูู ุฎุงุฏูู ุงููุญูู. ูุฐุง ุณูููุญู ุนููุงู URL ุนุงููุง ูุคูุชูุง ููููู ุงุณุชุฎุฏุงูู ูู Callback URL ูู ุฅุนุฏุงุฏุงุช ุงูู webhook ุนูู Facebook.

1.  **ุชุญููู ngrok**: ุงุฐูุจู ุฅูู [https://ngrok.com/download](https://ngrok.com/download) ููููู ุจุชุญููู ุงููุณุฎุฉ ุงูููุงุณุจุฉ ููุธุงู ุชุดุบููู.
2.  **ูู ุงูุถุบุท ุนู ngrok** ูุถุนู ุงูููู ุงูุชูููุฐู ูู ููุงู ูุณูู ุงููุตูู ุฅููู (ูุซุงู: ูุฌูุฏ ุงููุดุฑูุน ุฃู ูุฌูุฏ `bin`).
3.  **ุชุดุบูู ngrok**: ุงูุชุญู Terminal ุฃู Command Prompt ุฌุฏูุฏ (ุบูุฑ ุงูุฐู ูุดุบู ุงููุดุฑูุน) ูุดุบูู ุงูุฃูุฑ ุงูุชุงูู:
    ```bash
    ./ngrok http 5000
    ```
    (ุฅุฐุง ููุชู ุนูู Windowsุ ูุฏ ูููู `ngrok.exe http 5000`)
    ุณูุธูุฑ ููู ุนููุงู URL ุนุงู (ูุซุงู: `https://xxxxxx.ngrok-free.app`). ูุฐุง ูู ุนููุงู ุงูู webhook ุงููุคูุช ุงูุฎุงุต ุจู.

### 4. ุฅุนุฏุงุฏ ุงูู Webhook ูู Facebook Developer Console

1.  **ุงุฐูุจู ุฅูู ููุญุฉ ุชุญูู ุชุทุจููู** ุนูู Facebook Developer Console.
2.  ูู ูุงุฆูุฉ `Products`ุ ุงุฎุชุงุฑู `WhatsApp` ุซู `Configuration`.
3.  ูู ูุณู `Webhook`ุ ุงููุฑู ุนูู `Edit`.
4.  **Callback URL**: ุงูุตูู ุนููุงู URL ุงูุฐู ุญุตูุชู ุนููู ูู `ngrok` (ูุซุงู: `https://xxxxxx.ngrok-free.app/whatsapp/webhook`). ุชุฃูุฏู ูู ุฅุถุงูุฉ `/whatsapp/webhook` ูู ุงูููุงูุฉุ ูุฃู ูุฐุง ูู ุงููุณุงุฑ ุงูุฐู ูุณุชูุน ุฅููู ูุดุฑูุนู ูุฑุณุงุฆู ุงููุงุชุณุงุจ.
5.  **Verify Token**: ุฃุฏุฎูู ููุณ ุงูุฑูุฒ ุงูุฐู ุญุฏุฏุชูู ูู ููู `.env` ูู `WHATSAPP_VERIFY_TOKEN` (ูุซุงู: `my_secret_token_123`).
6.  ุงููุฑู ุนูู `Verify and Save`.
7.  **ุงูุงุดุชุฑุงู ูู ุญููู ุงูู Webhook**: ุจุนุฏ ุงูุชุญูู ุจูุฌุงุญุ ุณุชุธูุฑ ูู ูุงุฆูุฉ ุจุญููู ุงูู webhook. ุงููุฑู ุนูู `Manage` ุจุฌุงูุจ `Webhooks Fields` ูุงุดุชุฑูู ูู ุญูู `messages` ุนูู ุงูุฃูู ูุชููู ุฑุณุงุฆู ุงููุงุชุณุงุจ.

### 5. ุงุฎุชุจุงุฑ ุงูุชูุงูู

1.  **ุฃุฑุณูู ุฑุณุงูุฉ ูุงุชุณุงุจ** ุฅูู ุฑูู ุงููุงุชู ุงูุฐู ููุชู ุจุฅุนุฏุงุฏู ูู WhatsApp Business Account.
2.  ูุฌุจ ุฃู ุชุธูุฑ ุงูุฑุณุงูุฉ ูู Terminal ุงูุฐู ูุดุบู ูุดุฑูุนูุ ููุฌุจ ุฃู ูููู ุงููุดุฑูุน ุจุงูุฑุฏ ุนูููุง.

## ููุงุญุธุงุช ูููุฉ โ๏ธ

*   **ุฑููุฒ ngrok ุงููููุฒุฉ**: ุนููุงู URL ุงูุฐู ูููุฑู `ngrok` ูุฌุงูู ูุคูุช ููุชุบูุฑ ูู ูู ูุฑุฉ ุชููููู ูููุง ุจุชุดุบููู. ููุงุณุชุฎุฏุงู ุงููุณุชูุฑุ ููููู ุงูุชูููุฑ ูู ุงูุญุตูู ุนูู ุญุณุงุจ `ngrok` ูุฏููุน ููุญุตูู ุนูู ุนูุงููู URL ุซุงุจุชุฉ.
*   **ุงูุฃูุงู**: ูุง ุชุดุงุฑูู ููุงุชูุญ ุงููุงุชุณุงุจ ุฃู ุณุฑ ุงูุชุทุจูู ูุน ุฃุญุฏ.
*   **ููุงุฎุชุจุงุฑ ุงููุญูู**: ุงููุดุฑูุน ุณูุนูู ุจุฏูู ููุงุชูุญ ุงููุงุชุณุงุจุ ููู ูู ุชุชูููู ูู ุฅุฑุณุงู/ุงุณุชูุจุงู ุฑุณุงุฆู ูุงุชุณุงุจ ูุนููุฉ ุฅูุง ุจุนุฏ ุฅุนุฏุงุฏ ุงูููุงุชูุญ ู `ngrok`.

## ุฅุฐุง ูุงุฌูุช ูุดุงูู ๐

*   **ุชุฃูุฏู ูู ุฃู ูุดุฑูุนู ูุนูู** ุนูู `http://localhost:5000`.
*   **ุชุฃูุฏู ูู ุฃู `ngrok` ูุนูู** ุจุดูู ุตุญูุญ ููุธูุฑ ุนููุงู URL ุนุงู.
*   **ุชุญููู ูู ุฅุนุฏุงุฏุงุช ุงูู webhook** ูู Facebook Developer Console (Callback URL ู Verify Token).
*   **ุฑุงุฌุนู ูููุงุช ุงูู logs** ูู Terminal ุงูุฎุงุต ุจุงููุดุฑูุน ู Terminal ุงูุฎุงุต ุจู `ngrok` ููุจุญุซ ุนู ุฃู ุฃุฎุทุงุก.

---

**ููุงุญุธุฉ**: ูุฐุง ุงููุดุฑูุน ูุนุฏ ููุชุนูู ูุงูุงุฎุชุจุงุฑ. ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌุ ุณุชุญุชุงุฌูู ูุฅุนุฏุงุฏุงุช ุฃูุงู ุฅุถุงููุฉ ูุฏูููู ุฎุงุต ุจู.

